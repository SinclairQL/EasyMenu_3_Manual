{\rtf1\ansi \ansicpg1252{\colortbl;\red0\green0\blue0;\red0\green0\blue255;\red0\green255\blue255;\red0\green255\blue0;\red255\green0\blue255;\red255\green0\blue0;\red255\green255\blue0;\red255\green255\blue255;}{\fonttbl{\f0\fswiss\cpg0\fcharset0 Arial;}{\f1\fswiss\cpg1252\fcharset0 Arial;}{\f2\fswiss\cpg1251\fcharset204 Arial;}{\f3\fswiss\cpg1250\fcharset238 Arial;}{\f4\fswiss\cpg1257\fcharset186 Arial;}{\f5\fswiss\cpg1254\fcharset162 Arial;}{\f6\fswiss\cpg1253\fcharset161 Arial;}{\f7\fswiss\cpg1255\fcharset177 Arial;}{\f8\fswiss\cpg0\fcharset161 Arial;}{\f9\fswiss\cpg1256\fcharset178 Arial;}{\f10\fswiss\cpg874\fcharset222 Arial;}{\f11\fswiss\cpg1258\fcharset163 Arial;}}{\stylesheet {\sbasedon222\f1\fs20 Normal;}}\paperw11909\paperh16834\margl2885\margr2443\margt1440\margb720 \sectd \sbknone\pgwsxn11909\pghsxn16834\marglsxn2885\margrsxn2443\margtsxn1440\margbsxn720\cols1\colsx60 \pard \plain \cbpat8\ql\li1987\fi0\ri0\sb0\sa0\tx5477 \f1\fs20{\i0\b\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 EASYPTR3   Library Routines{\charscalex100\expndtw0\tab }Part III    253}\par \pard \plain \cbpat8\ql\li58\fi0\ri0\sb437\sa0 \f1\fs20{\i0\b\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 4.7 Primary window (C only)}\par \pard \plain \cbpat8\ql\li24\fi0\ri0\sb29\sa0\sl-221\slmult0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 Normally your C-Program will have the standard I/O channels stdin, stdout and stderr already open. It depends on your compiler and eventually special parameters whether these channels are opened as one ore more QDOS channels .}\par \pard \plain \cbpat8\ql\li10\fi0\ri0\sb0\sa0\sl-221\slmult0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 As your compiler may additionally offer options to redirect these channels from the normal console channel (and you may have a good reason to do so), we can not rely on that there is a known primary window available. To assure the existance of a primary window, the EU_PWTST function can be called at the beginning of the program. This function returns the QDOS channel ID of an existing primary window channel or reports 'err.fdnf, if there is none. If you want to know which of the standard channels is the primary window, you must compare the found channel ID with the channel ID of the standard channel(s) using fgetchid().}\par \pard \plain \cbpat8\ql\li29\fi0\ri0\sb221\sa0\sl-216\slmult0 \f1\fs20{\b0\i0\ul\cf0\charscalex100\expndtw-3\dn0\f1\cchs0\lang2057\fs18 Example:}\par \pard \plain \cbpat8\ql\li19\fi0\ri0\sb5\sa0\sl-216\slmult0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 extern long eu_pwtst();}\par \pard \plain \cbpat8\ql\li19\fi0\ri0\sb5\sa0\sl-216\slmult0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw-2\dn0\f1\cchs0\lang2057\fs18 main()}\par \pard \plain \cbpat8\ql\li14\fi0\ri0\sb0\sa0\sl-216\slmult0\tx773\tx1598 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 \{{\charscalex100\expndtw0\tab }\expndtw-4 long\expndtw0 {\charscalex100\expndtw0\tab }err,pwchid,fgetchid();}\par \pard \plain \cbpat8\ql\li773\fi0\ri403\sb5\sa0\sl-216\slmult0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 err=eu_pwtst(&primchid);      /*you should make an error test... */ if (err==-7)}\par \pard \plain \cbpat8\ql\li1598\fi0\ri0\sb0\sa0\sl-216\slmult0\tx3144 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw-1\dn0\f1\cchs0\lang2057\fs18 goto newpw;\expndtw0 {\charscalex100\expndtw0\tab }/*no primary window found -> open new*/}\par \pard \plain \cbpat8\ql\li773\fi0\ri0\sb0\sa0\sl-221\slmult0\tx3139 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw-2\dn0\f1\cchs0\lang2057\fs18 if (err<0)\expndtw0 {\charscalex100\expndtw0\tab }/*any other error should be handled by*/}\par \pard \plain \cbpat8\qc\li0\fi0\ri192\sb0\sa0\sl-221\slmult0\tx1541 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw-2\dn0\f1\cchs0\lang2057\fs18 myerror();\expndtw0 {\charscalex100\expndtw0\tab }/*your error routine*/}\par \pard \plain \cbpat8\ql\li768\fi-763\ri806\sb0\sa0\sl-221\slmult0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 /*if you want to know which of the standard channels is the primary */ errchid=fgetchid(stderr); if (errchid==pwchid)}\par \pard \plain \cbpat8\ql\li14\fi1579\ri2016\sb0\sa0\sl-221\slmult0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 goto foundpw;       \i I* \i0 and so on ... */ newpw:   ...}\par \pard \plain \cbpat8\ql\li0\fi0\ri0\sb226\sa0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 foundpw:...}\par \pard \plain \cbpat8\ql\li0\fi0\ri0\sb216\sa0\sl-221\slmult0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 An other way to get control over the primary window, is to call the EU_PWMAK function once at the beginning of the program. This creates a new primary window and leaves all other window channels, which are already open, unchanged (as secondary windows).}\par \pard \plain \cbpat8\ql\li19\fi0\ri0\sb216\sa0\sl-226\slmult0 \f1\fs20{\b0\i0\ul\cf0\charscalex100\expndtw-3\dn0\f1\cchs0\lang2057\fs18 Example:}\par \pard \plain \cbpat8\ql\li10\fi0\ri0\sb0\sa0\sl-226\slmult0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 extern long eu_pwmak();}\par \pard \plain \cbpat8\ql\li14\fi0\ri0\sb0\sa0\sl-226\slmult0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw-4\dn0\f1\cchs0\lang2057\fs18 main ()}\par \pard \plain \cbpat8\ql\li5\fi0\ri0\sb24\sa0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 \{}\par \pard \plain \cbpat8\ql\li768\fi0\ri0\sb0\sa0\tx1594 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw-4\dn0\f1\cchs0\lang2057\fs18 long\expndtw0 {\charscalex100\expndtw0\tab }\expndtw-2 err,pwchid;}\par \pard \plain \cbpat8\ql\li763\fi0\ri0\sb10\sa0 \f1\fs20{\b0\i0\cf0\charscalex100\expndtw0\dn0\f1\cchs0\lang2057\fs18 err=eu_pwmak(&pwchid);     /*now pwchid is the primary window*/}\par }